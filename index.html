<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Sri Arya Akshobya Moola Samsthana Balagaru</title>
  <link rel="stylesheet" href="style.css" />
  <!-- Light SEO -->
  <meta name="description" content="Balagaru Mutt, Teerthahalli — traditional Vedic Mutt preserving Parampara, seva and upadesha." />
</head>
<body>
  <!--
    Full-width hero-image section (added as requested).
    Placed at the very top of <body> so it appears before the site header.
    Uses images/hero.png as background and an overlay for legible text.
  -->
  <section class="hero-image" role="banner" aria-label="Balagaru Mutt hero">
    <!-- Overlay containing title, subtitle, and tagline (no JS; pure HTML/CSS) -->
    <div class="hero-overlay">
      <h1 class="hero-title">Sri Arya Akshobya Moola Samsthana, Balagaru</h1>
      <h2 class="hero-subtitle">Teerthahalli</h2>
      <p class="hero-tagline">Preserving Dharma • Sampradaya • Seva</p>
    </div>
  </section>

  <!-- Site wrapper -->
  <div class="site">

    <!-- Header -->
    <header class="site-header">
      <div class="container header-inner">
        <div class="brand">
          <h1 class="mutt-name">Balagaru Mutt</h1>
          <p class="mutt-loc">Teerthahalli, Karnataka</p>
        </div>

        <!-- Simple, dignified navigation -->
        <nav class="site-nav" aria-label="Primary">
          <a href="index.html" class="nav-item">Home</a>
          <a href="about.html" class="nav-item">About</a>
          <a href="parampara.html" class="nav-item">Parampara</a>
          <a href="news.html" class="nav-item">News</a>
          <a href="gallery.html" class="nav-item">Gallery</a>
          <a href="contact.html" class="nav-item">Contact</a>
        </nav>
      </div>
    </header>

    <!-- Hero (existing small hero kept per instructions: do NOT remove) -->
    <main>
      <section class="hero">
        <div class="container">
          <h2 class="hero-title small">A seat of learning, devotion and service</h2>
          <p class="hero-text">Balagaru Mutt in Teerthahalli is dedicated to preserving the Guru–Shishya tradition and serving the local community with Vedic teaching and social service.</p>
        </div>
      </section>

      <!-- About summary -->
      <section class="summary container">
        <h3>About the Mutt</h3>
        <p>Balagaru Mutt follows a time-honoured tradition of spiritual teaching and community service. We offer Vedic study, upadesha (spiritual instruction) and organise periodic yagnas and seva programmes.</p>
        <p><a href="about.html" class="read-more">Read more →</a></p>
      </section>

      <!-- Parampara summary -->
      <section class="summary container">
        <h3>Guru Parampara</h3>
        <p>Our Parampara traces the succession of Acharyas who maintained the teaching and practices from generation to generation. The current Peetadhipati continues the lineage with humility and devotion.</p>
        <p><a href="parampara.html" class="read-more">See the Parampara →</a></p>
      </section>

      <!-- Latest news (auto-loaded from content/news/index.json) -->
      <section class="latest-news container" id="latest-news">
        <h3>Latest News & Events</h3>
        <div id="news-list">
          <!-- News items will be injected here by JS -->
          <p class="muted">Loading recent news…</p>
        </div>
        <p><a href="news.html" class="read-more">All news & events →</a></p>
      </section>

    </main>

    <!-- Footer -->
    <footer class="site-footer">
      <div class="container footer-inner">
        <p>© <span id="year"></span> Balagaru Mutt, Teerthahalli. All rights reserved.</p>
        <p class="small-muted">Designed for simplicity and respectful presentation. Admin: <a href="admin/index.html">CMS</a></p>
      </div>
    </footer>
  </div>

  <!-- Minimal JS to load latest news from /content/news/index.json -->
  <script>
    // Set copyright year
    document.getElementById('year').textContent = new Date().getFullYear();

    // Helper: format ISO date to readable form
    function formatDate(iso) {
      try {
        const d = new Date(iso);
        return d.toLocaleDateString(undefined, { year: 'numeric', month: 'short', day: 'numeric' });
      } catch (e) { return iso; }
    }

    // Load the news manifest and display newest 3
    (function loadLatestNews() {
      fetch('/content/news/index.json')
        .then(function (r) {
          if (!r.ok) throw new Error('News index not found');
          return r.json();
        })
        .then(function (data) {
          if (!Array.isArray(data) || data.length === 0) {
            document.getElementById('news-list').innerHTML = '<p class="muted">No news available.</p>';
            return;
          }
          // Sort newest first by date
          data.sort(function (a, b) { return new Date(b.date) - new Date(a.date); });
          const latest = data.slice(0, 3);
          const list = document.createElement('div');
          list.className = 'news-cards';
          latest.forEach(function (item) {
            const card = document.createElement('article');
            card.className = 'news-card';
            const title = document.createElement('h4');
            title.innerHTML = '<a href="news.html?file=' + encodeURIComponent(item.file) + '">' + item.title + '</a>';
            const date = document.createElement('div');
            date.className = 'news-date';
            date.textContent = formatDate(item.date);
            const excerpt = document.createElement('p');
            excerpt.textContent = item.excerpt || '';
            card.appendChild(title);
            card.appendChild(date);
            card.appendChild(excerpt);
            list.appendChild(card);
          });
          const container = document.getElementById('news-list');
          container.innerHTML = '';
          container.appendChild(list);
        })
        .catch(function () {
          // If fetch fails, show friendly guidance; this could happen before any news are set up.
          document.getElementById('news-list').innerHTML = '<p class="muted">No news available. Use the admin panel (Admin →) to add news.</p>';
        });
    })();
  </script>
</body>
</html>
